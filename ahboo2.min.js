angular.module("angularExperimentApp").controller("AboutCtrl",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});angular.module("angularExperimentApp").controller("MainCtrl",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});angular.module("ytApp").controller("youtubePlayerController",["$scope","dataService","$modal","youtubeEmbedUtils","youtubeDataApiService","utilityService","$window",function(a,b,e,c,f,d,h){function g(c){!_.isUndefined(c)&&_.isObject(c)&&(_.each(a.playlistAry,function(a){var b=d.findIndex(a.playlist,function(a){return a.videoId==c.videoId});-1!=b&&(a.playlist[b]=angular.copy(c))}),b.editSongFromPlaylist(c))}function k(c){!_.isUndefined(c)&&_.isObject(c)&&(_.find(a.playlistAry,function(a){return a.playlistId==
c.playlistId}).name=c.name,b.editPlaylistName(c))}function m(c){a.currentPlaylist&&(a.currentPlaylist.currentlyPlaying=!1,a.currentPlaylist=c)}a.playlistAry=[];a.alerts=[];a.selectedPlaylist={};a.isOpenNewPlaylistForm=!1;a.closeAlert=function(c){a.alerts.splice(c,1)};a.loadAndPlayPlaylist=function(c){a.ytPlayer&&"paused"==a.ytPlayer.currentState?a.ytPlayer.playVideo():a.ytPlayer.loadAndPlayPlaylist&&"function"===typeof a.ytPlayer.loadAndPlayPlaylist&&(a.ytPlayer.loadAndPlayPlaylist(c),m(c))};a.loadAndPlaySong=
function(c,b){a.ytPlayer.loadAndPlaySong&&"function"===typeof a.ytPlayer.loadAndPlaySong&&(a.ytPlayer.loadAndPlaySong(c,b),m(c))};a.loadPlaylist=function(c){a.selectedPlaylist.isSelectedPlaylist=!1;c.isSelectedPlaylist=!0;a.selectedPlaylist=c};a.pauseCurrentSong=function(){a.ytPlayer.pauseVideo&&"function"===typeof a.ytPlayer.pauseVideo&&a.ytPlayer.pauseVideo()};a.playOrPause=function(c){!c.currentlyPlaying&&c.currentlyPlayed?a.ytPlayer.playVideo():c.currentlyPlaying||c.currentlyPlayed?a.ytPlayer.pauseVideo():
a.loadAndPlaySong(c,0)};a.openAddSongModal=function(){e.open({templateUrl:"addNewSong.html",controller:"EditSongModalCtrl",windowClass:"add-new-song-modal",resolve:{song:function(){return null},editingSong:function(){return!1},youtubeEmbedUtils:function(){return c},youtubeDataApiService:function(){return f},utilityService:function(){return d}}}).result.then(function(c){!0===c.isValidSong&&_.isObject(a.currentPlaylist)?(c={name:c.name,artistName:c.artistName,videoId:c.videoId,duration:c.duration,videoThumbUrl:c.videoThumbUrl},
a.selectedPlaylist.playlist.push(c),b.addSongToPlaylist(a.selectedPlaylist.playlistId,c),angular.equals(a.selectedPlaylist,a.currentPlaylist)&&(a.currentPlaylist.reloadNeeded=!0),a.alerts=[],a.alerts.push({type:"success",msg:"New song is added."})):(a.alerts=[],a.alerts.push({type:"danger",msg:"Error adding new song."}))},function(){})};a.openEditSongModal=function(a){e.open({templateUrl:"addNewSong.html",controller:"EditSongModalCtrl",windowClass:"add-new-song-modal",resolve:{song:function(){return a},
editingSong:function(){return!0},youtubeEmbedUtils:function(){return c},youtubeDataApiService:function(){return f},utilityService:function(){return d}}}).result.then(function(a){g(a)},function(){})};a.openEditPlaylistModal=function(a){var c=angular.copy(a);e.open({templateUrl:"editPlaylist.html",controller:"EditPlaylistModalCtrl",resolve:{playlist:function(){return c}}}).result.then(function(a){k(a)},function(){})};a.openNewPlaylistForm=function(){a.isOpenNewPlaylistForm=!0};a.resetPlaylistForm=function(){a.isOpenNewPlaylistForm=
!1;a.newPlaylistName=""};a.addNewPlaylist=function(c){!_.isUndefined(a.playlistAry)&&_.isArray(a.playlistAry)&&!_.isUndefined(c)&&_.isString(c)&&(c={playlistId:a.playlistAry.length+1,name:c,isSelectedPlaylist:!1,playlist:[]},a.playlistAry.push(c),b.addNewPlaylist(c),a.loadPlaylist(a.playlistAry[a.playlistAry.length-1]),a.resetPlaylistForm())};a.deletePlaylist=function(c){if(h.confirm("Are you sure to delete this playlist")){var e=d.findIndex(a.playlistAry,function(a){return a.playlistId==c.playlistId});
a.playlistAry.splice(e,1);b.deletePlaylist(c);0<e&&a.loadPlaylist(a.playlistAry[e-1])}};a.isPlaylistEmpty=function(a){return _.isUndefined(a)||_.isUndefined(a.playlist)||!_.isArray(a.playlist)||0==a.playlist.length};a.deleteSongFromPlaylist=function(c,d,e){c.playlist[e].videoId==d.videoId&&(c.playlist.splice(e,1),b.deleteSongFromPlaylist(c.playlistId,d,e),angular.equals(a.selectedPlaylist,a.currentPlaylist)&&(a.currentPlaylist.reloadNeeded=!0))};(function(){a.playlistAry=b.getPlaylistData();!_.isUndefined(a.playlistAry)&&
_.isArray(a.playlistAry)&&0!=a.playlistAry.length&&(a.currentPlaylist=_.find(a.playlistAry,function(a){return!0===a.isSelectedPlaylist}),a.currentPlaylist=_.isUndefined(a.currentPlaylist)?a.playlistAry[0]:a.currentPlaylist,a.loadPlaylist(a.currentPlaylist))})()}]);
angular.module("ytApp").controller("EditSongModalCtrl",["$scope","$modalInstance","song","editingSong","youtubeEmbedUtils","youtubeDataApiService","utilityService",function(a,b,e,c,f,d,h){function g(c){if(_.isObject(c)&&_.isObject(c.pageInfo)&&1==c.pageInfo.totalResults){c=c.items[0];a.song.name=c.snippet.title;var b=a.song,d;d=h.convertYoutubeDurationString(c.contentDetails.duration);d=h.convertMiliSecondToHhmmss(d);b.duration=d;a.song.videoThumbUrl=c.snippet.thumbnails.medium.url;a.song.videoId=
c.id;a.song.isValidSong=!0;a.isUrlLoaded=!0}else a.song.isValidSong=!1}function k(){a.song.isValidSong=!1}a.isUrlLoaded=!1;a.editingSong=c;a.saveText=c?"Edit":"Add New";a.editingSong?(a.song=angular.copy(e),a.isUrlLoaded=!0):a.song={};a.ok=function(c){c.$valid&&b.close(a.song)};a.checkYoutubeUrl=function(a){a=f.getIdFromURL(a);d.getVideoDataById(a).then(g,k)};a.cancel=function(){b.dismiss("cancel")}}]);
angular.module("ytApp").controller("EditPlaylistModalCtrl",["$scope","$modalInstance","playlist",function(a,b,e){!_.isUndefined(e)&&_.isObject(e)&&(a.playlist=e);a.ok=function(c){c.$valid&&b.close(a.playlist)};a.cancel=function(){b.dismiss("cancel")}}]);angular.module("ab.directives").directive("abPasteOrEnter",["$timeout",function(a){return{restrict:"A",scope:{abPasteOrEnter:"&"},link:function(b,e,c){function f(){b.abPasteOrEnter()}angular.element(e).bind("keypress",function(a){13==(a.keyCode||a.which)&&f()});angular.element(e).bind("paste",function(){a(f,500)})}}}]);angular.module("ab.directives").directive("hideOnHover",[function(){return{restrict:"A",link:function(a,b,e){a=e.hideOnHover.split(",");var c="";_.each(a,function(a,b){0<b&&(c+=",");c+="."+a});var f=$(b);f.on("mouseenter",function(){f.find(c).hide()});f.on("mouseleave",function(){f.find(c).show()})}}}]);angular.module("ab.directives").directive("showHideOutsideElement",["$timeout",function(a){return{restrict:"A",link:function(b,e,c){var f=angular.element(c.showHideOutsideElement);b.elementMouseLeave=!0;b.outsideElementMouseLeave=!0;e.on("mouseenter",function(){f.clearQueue();f.show();b.elementMouseLeave=!1});e.on("mouseleave",function(){a(function(){!0===b.outsideElementMouseLeave&&!0===b.elementMouseLeave&&f.slideUp()},500);b.elementMouseLeave=!0});f.on("mouseenter",function(){b.outsideElementMouseLeave=
!1});f.on("mouseleave",function(){a(function(){!0===b.outsideElementMouseLeave&&!0===b.elementMouseLeave&&f.slideUp()},1500);b.outsideElementMouseLeave=!0})}}}]);angular.module("ab.directives").directive("showOnHover",[function(){return{restrict:"A",link:function(a,b,e){var c=e.showOnHover,f=$(b);f.on("mouseenter",function(){f.find("."+c).show()});f.on("mouseleave",function(){f.find("."+c).hide()})}}}]);angular.module("ui.slider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(a,b){a=a||{};return{require:"ngModel",compile:function(){return{pre:function(e,c,f,d){function h(a,c){return c?parseFloat(a):parseInt(a,10)}var g=angular.extend(e.$eval(f.uiSlider)||{},a),k=null,m=null,p=["min","max","step"],n=angular.isUndefined(f.useDecimals)?!1:!0,l=function(){angular.isArray(d.$viewValue)&&!0!==g.range&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),
g.range=!0);angular.forEach(p,function(a){angular.isDefined(f[a])&&(g[a]=h(f[a],n))});c.slider(g);l=angular.noop};angular.forEach(p,function(a){f.$observe(a,function(b){b&&(l(),g[a]=h(b,n),c.slider("option",a,h(b,n)),d.$render())})});f.$observe("disabled",function(a){l();c.slider("option","disabled",!!a)});e.$watch(f.uiSlider,function(a){l();void 0!==a&&c.slider("option",a)},!0);b(l,0,!0);c.bind("slide",function(a,c){d.$setViewValue(c.values||c.value);e.$apply()});d.$render=function(){l();var a=!0===
g.range?"values":"value";g.range||!isNaN(d.$viewValue)||d.$viewValue instanceof Array?g.range&&!angular.isDefined(d.$viewValue)&&(d.$viewValue=[0,0]):d.$viewValue=0;!0===g.range&&(angular.isDefined(g.min)&&g.min>d.$viewValue[0]&&(d.$viewValue[0]=g.min),angular.isDefined(g.max)&&g.max<d.$viewValue[1]&&(d.$viewValue[1]=g.max),d.$viewValue[0]>d.$viewValue[1]&&(k>=d.$viewValue[1]&&(d.$viewValue[0]=k),m<=d.$viewValue[0]&&(d.$viewValue[1]=m)),k=d.$viewValue[0],m=d.$viewValue[1]);c.slider(a,d.$viewValue)};
e.$watch(f.ngModel,function(){!0===g.range&&d.$render()},!0);e.$on("$destroy",function(){c.slider("destroy")})},post:function(a,c,b,d){var h=angular.extend({},a.$eval(b.uiSlider));angular.forEach(["max","step","tick"],function(a){angular.isDefined(b[a])&&(h[a]=b[a])});if(angular.isDefined(h.tick)&&angular.isDefined(h.step))for(d=a=parseInt(parseInt(h.max)/parseInt(h.step));0<=d;d--){var g=d/a*100+"%";$("<div/>").addClass("ui-slider-tick").appendTo(c).css({left:g})}}}}}}]);angular.module("ab.directives").directive("sliderHover",["$animate",function(a){return{restrict:"A",link:function(b,e,c){c=$(e);c.on("mouseenter",function(){a.addClass(e,"slider-hover");b.$digest()});c.on("mouseleave",function(){a.removeClass(e,"slider-hover");b.$digest()})}}}]);angular.module("ytApp").directive("ytPlayer",["$http","youtubeEmbedUtils","$interval",function(a,b,e){return{restrict:"E",templateUrl:"views/templates/ytPlayer.html",replace:!0,scope:{videoId:"=?",videoUrl:"=?",customPlayer:"=?",playlist:"=?"},link:function(a,f,d){function h(b,d){!0===b.reloadNeeded&&(b.reloadNeeded=!1,a.player.loadAndPlaySong&&"function"===typeof a.player.loadAndPlaySong&&a.player.loadAndPlaySong(b,p(d),a.player.isShuffle,a.player.isRepeat))}function g(){var d=a.player.getVideoUrl(),
e=b.getIdFromURL(d);a.currentSong&&(a.currentSong.currentlyPlaying=!1);n.currentlyPlayed=!1;d=_.find(a.playlist.playlist,function(a,c){a.videoIndex=c;a.currentlyPlaying=a.videoId===e?!0:!1;return a.videoId===e});a.currentSong=d;k(a.currentSong);a.playlist.currentlyPlaying=!0;n=a.playlist;n.currentlyPlayed=!0}function k(b){var d=a.player.getDuration();a.currentlyPlayingSongInfo.name=b.name;a.currentlyPlayingSongInfo.artistName=b.artistName;a.currentlyPlayingSongInfo.videoDuration=d;a.sliderOptions.max=
d}function m(){a.stopInterval=e(function(){l||(a.currentlyPlayingSongInfo.currentTime=a.player.getCurrentTime(),a.currentlyPlayingSongInfo.DurationLeft=a.currentlyPlayingSongInfo.videoDuration-a.currentlyPlayingSongInfo.currentTime)},500)}function p(b){return!0===a.player.isShuffle?Math.floor(Math.random()*(a.playlist.playlist.length-1)+0):b?a.currentSong.videoIndex-1:a.currentSong.videoIndex+1}var n={};a.isShuffle=!1;a.isRepeat=!1;a.currentlyPlayingSongInfo={};a.currentSong=null;a.sliderOptions=
{orientation:"horizontal",min:0,max:0};a.volumnSliderOptions={orientation:"horizontal",min:0,max:100,tooltip:"hidden"};a.sliderInfo={sliderOnOneSecondWait:!1,sliderPositionToChange:null};var l=!1;a.backward=function(){!0===a.playlist.reloadNeeded?h(a.playlist,!0):a.player.previousVideo()};a.forward=function(){!0===a.playlist.reloadNeeded?h(a.playlist,!1):a.player.nextVideo()};a.playPause=function(){"playing"==a.player.currentState?a.player.pauseVideo():a.player.playVideo()};a.toggleShuffle=function(){a.player&&
(a.player.isShuffle=!a.player.isShuffle)};a.toggleRepeat=function(){a.player&&(a.player.isRepeat=!a.player.isRepeat)};a.$on("youtube.player.ready",function(b,d){a.customPlayer=a.player;a.customPlayer.volume=50});a.$on("youtube.player.queued",function(d,e){var g=a.player.getVideoUrl(),f=b.getIdFromURL(g),g=_.find(a.playlist.playlist,function(a,c){a.videoIndex=c;return a.videoId===f});a.currentSong=g;k(a.currentSong)});a.$on("youtube.player.playing",function(a,c){g();m()});a.$on("youtube.player.paused",
function(b,d){a.currentSong&&(a.currentSong.currentlyPlaying=!1,a.playlist.currentlyPlaying=!1)});a.$on("youtube.player.unstarted",function(b,d){h(a.playlist,!1)});a.startDragging=function(){l=!0};a.stopDragging=function(b){l=!1;a.player.seekTo(b,!0)};a.$watch("player.volume",function(){_.isObject(a.player)&&_.isFunction(a.player.setVolume)&&a.player.setVolume(a.player.volume)});a.playerVars={customPlaylist:a.playlist.playlist};a.$watch("currentlyPlayingSongInfo.currentTime",function(b){l&&a.player.seekTo(b,
!1)});String.prototype.toHHMMSS=function(){var a=parseInt(this,10),b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),a=a-3600*b-60*c;10>a&&(a="0"+a);return 1>b?c+":"+a:b+":"+c+":"+a}}}}]);angular.module("ab.services").factory("dataService",["localStorageService","appSettings","utilityService",function(a,b,e){function c(){var c=a.load(b.localStorageKey.playlist);return _.isUndefined(c)||_.isNull(c)}function f(a,b){return _.find(b,function(b){return b.playlistId==a})}return{getPlaylistData:function(){if(c()){var d=[{playlistId:1,name:"Sample playlist",isSelectedPlaylist:!0,playlist:[{name:"Thiake Ma Ket Bu",artistName:"Tin Zar Maw",videoId:"W2Z3GWt8v9w"},{name:"Mhar Pyan Dal",artistName:"Chan Chan",
videoId:"9BImfRpcsHg"},{name:"Tun Eindra Bo - Live Concert - 8",artistName:"Tun Eindra Bo",videoId:"OHxgbwyoQtA"},{name:"Tate Ta Khoe",artistName:"Bobby Soxer ft Ye' Lay",videoId:"l7SPUVUPQCo"}]},{playlistId:2,name:"Playlist 1",isSelectedPlaylist:!1,playlist:[]}];this.savePlaylistData(d);return d}return a.load(b.localStorageKey.playlist)},savePlaylistData:function(c){a.save(b.localStorageKey.playlist,c)},addSongToPlaylist:function(d,e){if(_.isNumber(d)&&_.isObject(e)&&!c()){var g=a.load(b.localStorageKey.playlist),
k=f(d,g);_.isObject(k)&&null!=g&&(k.playlist.push(e),a.save(b.localStorageKey.playlist,g))}},deleteSongFromPlaylist:function(d,e,g){if(_.isNumber(d)&&_.isObject(e)&&_.isNumber(g)&&!c()){var k=a.load(b.localStorageKey.playlist);d=f(d,k);_.isObject(d)&&d.playlist.length>=g+1&&(d.playlist[g].videoId==e.videoId&&d.playlist.splice(g,1),a.save(b.localStorageKey.playlist,k))}},editSongFromPlaylist:function(d){if(_.isObject(d)&&_.isString(d.videoId)&&!c()){var f=a.load(b.localStorageKey.playlist);_.each(f,
function(a){var b=e.findIndex(a.playlist,function(a){return a.videoId==d.videoId});-1!=b&&(a.playlist[b]=angular.copy(d))});a.save(b.localStorageKey.playlist,f)}},addNewPlaylist:function(d){if(!_.isUndefined(d)&&_.isObject(d)&&!c()){var e=a.load(b.localStorageKey.playlist);e.push(d);a.save(b.localStorageKey.playlist,e)}},deletePlaylist:function(d){if(!_.isUndefined(d)&&_.isObject(d)&&!c()){var e=a.load(b.localStorageKey.playlist),f=-1;_.each(e,function(a,b){a.playlistId==d.playlistId&&(f=b)});-1<
f&&(e.splice(f,1),a.save(b.localStorageKey.playlist,e))}},editPlaylistName:function(d){if(!_.isUndefined(d)&&_.isObject(d)&&!c()){var e=a.load(b.localStorageKey.playlist);_.find(e,function(a){return a.playlistId==d.playlistId}).name=d.name;a.save(b.localStorageKey.playlist,e)}}}}]);angular.module("ab.services").factory("localStorageService",["$window",function(a){return{save:function(b,e){"undefined"!==typeof a.localStorage&&null!=a.localStorage&&a.localStorage.setItem(b,JSON.stringify(e))},remove:function(b){"undefined"!==typeof a.localStorage&&null!=a.localStorage&&a.localStorage.removeItem(b)},load:function(b){if("undefined"===typeof a.localStorage||null==a.localStorage)return null;b=a.localStorage.getItem(b);if("undefined"!==typeof b&&null!=b&&""!=b){var e=null;try{e=JSON.parse(b)}catch(c){}return e}}}}]);angular.module("ab.services").factory("utilityService",[function(){return{convertYoutubeDurationString:function(a){var b=a.match(/\d+/g);0<=a.indexOf("M")&&-1==a.indexOf("H")&&-1==a.indexOf("S")&&(b=[0,b[0],0]);0<=a.indexOf("H")&&-1==a.indexOf("M")&&(b=[b[0],0,b[1]]);0<=a.indexOf("H")&&-1==a.indexOf("M")&&-1==a.indexOf("S")&&(b=[b[0],0,0]);a=0;3==b.length&&(a+=3600*parseInt(b[0]),a+=60*parseInt(b[1]),a+=parseInt(b[2]));2==b.length&&(a+=60*parseInt(b[0]),a+=parseInt(b[1]));1==b.length&&(a+=parseInt(b[0]));
return a},convertMiliSecondToHhmmss:function(a){var b=parseInt(a,10);a=Math.floor(b/3600);var e=Math.floor((b-3600*a)/60),b=b-3600*a-60*e;10>b&&(b="0"+b);return 1>a?e+":"+b:a+":"+e+":"+b},findIndex:function(a,b){var e=-1;_.each(a,function(a,f){b(a)&&(e=f)});return e}}}]);angular.module("ab.services").factory("youtubeDataApiService",["$q",function(a){function b(a){if(_.isBoolean(isYoutubeDataApiLoaded)&&!0===isYoutubeDataApiLoaded)return gapi.client.youtube.videos.list({id:a,part:"snippet,status,contentDetails"})}return{getVideoDataById:function(e){var c=a.defer();b(e).execute(function(a){c.resolve(a)});return c.promise}}}]);